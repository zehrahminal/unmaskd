<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Infographic Series — Unmask'd</title>

  <!-- Fonts & Chart.js -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Open+Sans:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --bg:#0f0f10;
      --card:#181c1e;
      --muted:#cfeee9;
      --accent-mint:#00ffe0;
      --accent-pink:#ff4d6d;
      --accent-yellow:#ffe066;
      --accent-purple:#9b6bff;
      --glass: rgba(255,255,255,0.03);
      --max-width:1100px;
      --radius:14px;
      --gap:20px;
      font-family: "Open Sans", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color: #e6f7f4;
    }

    html,body{
      height:100%;
      margin:0;
      background: linear-gradient(180deg, #070707 0%, #0f0f10 100%);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .page {
      max-width: var(--max-width);
      margin: 28px auto;
      padding: 28px;
      box-sizing: border-box;
    }

    header.site-header {
      display:flex;
      align-items:center;
      gap:18px;
      margin-bottom:18px;
    }
    .site-title {
      font-family: 'Playfair Display', serif;
      font-weight:700;
      font-size:1.9rem;
      /* gradient text */
      background: linear-gradient(90deg,var(--accent-yellow),var(--accent-pink),var(--accent-mint));
      background-size: 300% 300%;
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      color: transparent;
    }
    .site-desc {
      color:var(--muted);
      font-size:1rem;
      margin-top:6px;
    }

    .topbar {
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:16px;
      margin-bottom:22px;
      flex-wrap:wrap;
    }

    .btn {
      display:inline-block;
      background: linear-gradient(120deg, var(--accent-mint) 0%, var(--accent-pink) 100%);
      color:#101218;
      font-weight:900;
      padding:10px 16px;
      border-radius:999px;
      text-decoration:none;
      box-shadow:0 8px 30px rgba(0,255,224,0.06);
    }

    .intro {
      margin-bottom:20px;
      color:var(--muted);
    }

    /* Layout: top row 3 small cards for pies; bottom row 2 wide cards (bar + line) */
    .grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--gap);
      margin-top:12px;
      align-items: start;
    }

    .wide-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--gap);
      margin-top: 24px;
      align-items: start;
    }

    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid var(--glass);
      padding:18px;
      border-radius: var(--radius);
      box-shadow: 0 8px 30px rgba(0,0,0,0.6);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
    }

    .card h3 {
      margin:0 0 8px 0;
      color:var(--accent-mint);
      font-family: 'Montserrat', sans-serif;
      font-size:1.05rem;
      text-align:center;
    }

    /* Ensure canvases scale responsively inside cards */
    .chart-wrap {
      width: 100%;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    canvas {
      width:100% !important;
      max-width: 360px;
      height: 260px !important;
      display: block;
    }

    /* For wide charts allow larger canvases */
    .card.wide canvas {
      max-width: 100%;
      height: 360px !important;
    }

    .legend {
      margin-top:12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
      font-size:0.92rem;
      color:var(--muted);
    }
    .legend span {
      display:flex;
      gap:8px;
      align-items:center;
      padding:6px 8px;
      border-radius:8px;
      background: rgba(255,255,255,0.01);
    }
    .dot {
      width:12px;
      height:12px;
      border-radius:3px;
      display:inline-block;
    }

    /* Small descriptive caption area under charts if needed */
    .caption {
      color:var(--muted);
      font-size:0.92rem;
      margin-top:10px;
      text-align:center;
      max-width: 860px;
    }

    /* Responsive */
    @media (max-width: 980px) {
      .grid { grid-template-columns: repeat(2, 1fr); }
      .wide-grid { grid-template-columns: 1fr; }
      canvas { height:220px !important; }
    }
    @media (max-width: 640px) {
      .grid { grid-template-columns: 1fr; }
      .page { padding:16px; }
      canvas { height:200px !important; max-width: 420px; }
    }

    footer.site-footer {
      margin-top:22px;
      color:var(--muted);
      text-align:center;
      font-size:0.95rem;
    }

    /* subtle heading underline to match site vibe */
    .site-header > div:first-child { flex: 1 1 auto; }
    .site-title { display:block; }
  </style>
</head>
<body>
  <div class="page" role="main">
    <header class="site-header" aria-labelledby="inf-title">
      <div>
        <div id="inf-title" class="site-title">Infographic Series</div>
        <div class="site-desc">Visual breakdowns of digital abuse trends.</div>
      </div>
      <div style="margin-left:auto;">
        <a href="index.html" class="btn" aria-label="Back to Home">Back to Home</a>
      </div>
    </header>

    <p class="intro">Below are three pie charts plus a current-status bar chart and a before/after line comparison. Hover (or tap) any slice to view a tooltip. Charts animate on page load and are responsive.</p>

    <!-- Top row: three pie charts -->
    <section class="grid" aria-label="Infographic charts">
      <article class="card" aria-labelledby="chart1-title">
        <h3 id="chart1-title">Types of Cyber Abuse</h3>
        <div class="chart-wrap" style="min-height:260px;">
          <canvas id="chartTypes" role="img" aria-label="Pie chart showing types of cyber abuse"></canvas>
        </div>
        <div class="legend" id="legend-types" aria-hidden="false"></div>
      </article>

      <article class="card" aria-labelledby="chart2-title">
        <h3 id="chart2-title">Age Group Affected</h3>
        <div class="chart-wrap" style="min-height:260px;">
          <canvas id="chartAges" role="img" aria-label="Pie chart showing age groups affected"></canvas>
        </div>
        <div class="legend" id="legend-ages"></div>
      </article>

      <article class="card" aria-labelledby="chart3-title">
        <h3 id="chart3-title">Platform Distribution</h3>
        <div class="chart-wrap" style="min-height:260px;">
          <canvas id="chartPlatforms" role="img" aria-label="Pie chart showing platform distribution"></canvas>
        </div>
        <div class="legend" id="legend-platforms"></div>
      </article>
    </section>

    <!-- Bottom row: bar + line charts -->
    <section class="wide-grid" aria-label="Summary charts">
      <article class="card wide" aria-labelledby="chart4-title">
        <h3 id="chart4-title">Current Numbers — Snapshot</h3>
        <div class="chart-wrap">
          <canvas id="chartSnapshot" role="img" aria-label="Bar chart showing current numbers for users, downloads, outreach events, site visits"></canvas>
        </div>
        <div class="legend" id="legend-snapshot"></div>
        <div class="caption">Current values for our platform metrics (example snapshot).</div>
      </article>

      <article class="card wide" aria-labelledby="chart5-title">
        <h3 id="chart5-title">Before vs After Using Unmask’d</h3>
        <div class="chart-wrap">
          <canvas id="chartBeforeAfter" role="img" aria-label="Line chart comparing before and after metrics over months"></canvas>
        </div>
        <div class="legend" id="legend-beforeafter"></div>
        <div class="caption">Two series compare average user-reported confidence & reporting rates before and after intervention.</div>
      </article>
    </section>

    <footer class="site-footer" role="contentinfo">
      <small>Data shown are illustrative / fictional and match the visual style of Unmask'd.</small>
    </footer>
  </div>

  <script>
    // Theme colours (matching your site)
    const COLORS = {
      mint: '#00ffe0',
      pink: '#ff4d6d',
      yellow: '#ffe066',
      purple: '#9b6bff',
      teal: '#22d1c9',
      deep: '#6de0ff',
      darkBorder: '#0b0b0b'
    };

    // Helper: build legend HTML (custom for pies)
    function renderLegend(containerId, labels, colors) {
      const container = document.getElementById(containerId);
      if (!container) return;
      container.innerHTML = '';
      labels.forEach((lab, i) => {
        const span = document.createElement('span');
        span.innerHTML = '<i class="dot" style="background:' + colors[i % colors.length] + ';"></i> ' + lab;
        container.appendChild(span);
      });
    }

    // Chart.js global defaults (fonts, colors)
    Chart.defaults.font.family = "'Open Sans', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial";
    Chart.defaults.color = '#e6f7f4';
    // Keep pie custom legends, enable built-in legend for bar/line
    Chart.defaults.plugins.legend.labels.boxWidth = 16;
    Chart.defaults.plugins.tooltip.cornerRadius = 6;
    Chart.defaults.maintainAspectRatio = false;

    // Utility: create pie chart with percentage tooltip
    function createPie(ctx, labels, data, colors) {
      const total = data.reduce((a,b)=>a+b,0);
      return new Chart(ctx, {
        type: 'pie',
        data: {
          labels: labels,
          datasets: [{
            data: data,
            backgroundColor: colors,
            borderColor: COLORS.darkBorder,
            borderWidth: 2,
            hoverOffset: 8
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          animation: { duration: 900, easing: 'easeOutQuart' },
          plugins: {
            legend: { display: false }, // we use custom legend below
            tooltip: {
              callbacks: {
                label: function(context) {
                  const value = context.raw;
                  const percent = total ? ((value / total) * 100) : 0;
                  return context.label + ': ' + value + ' (' + percent.toFixed(1) + '%)';
                }
              }
            }
          }
        }
      });
    }

    // Utility: create bar chart (snapshot)
    function createBar(ctx, labels, data, colors) {
      return new Chart(ctx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [{
            label: 'Current',
            data: data,
            backgroundColor: colors,
            borderColor: colors.map(c => tinyAlpha(c, 0.9)),
            borderWidth: 1,
            borderRadius: 8,
            maxBarThickness: 64
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            x: {
              grid: { display: false },
              ticks: { color: '#dff7f2', font: { weight: 700 } }
            },
            y: {
              grid: { color: 'rgba(255,255,255,0.04)' },
              ticks: { color: '#dff7f2' },
              beginAtZero: true
            }
          },
          plugins: {
            legend: { display: false },
            tooltip: {
              callbacks: {
                label: function(ctx) {
                  return ctx.dataset.label + ': ' + ctx.formattedValue;
                }
              }
            }
          },
          animation: { duration: 900, easing: 'easeOutQuart' }
        }
      });
    }

    // Utility: create line chart (before vs after)
    function createBeforeAfterLine(ctx, labels, seriesA, seriesB, colorA, colorB) {
      return new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [
            {
              label: 'Before',
              data: seriesA,
              borderColor: colorA,
              backgroundColor: tinyAlpha(colorA, 0.12),
              tension: 0.28,
              pointRadius: 4,
              pointBackgroundColor: colorA,
              fill: true
            },
            {
              label: 'After',
              data: seriesB,
              borderColor: colorB,
              backgroundColor: tinyAlpha(colorB, 0.12),
              tension: 0.28,
              pointRadius: 4,
              pointBackgroundColor: colorB,
              fill: true
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          interaction: { mode: 'index', intersect: false },
          plugins: {
            legend: { display: true, labels: { color: '#dff7f2' } },
            tooltip: { mode: 'index', intersect: false }
          },
          scales: {
            x: {
              grid: { display: false },
              ticks: { color: '#dff7f2' }
            },
            y: {
              grid: { color: 'rgba(255,255,255,0.04)' },
              ticks: { color: '#dff7f2' },
              beginAtZero: false
            }
          },
          animation: { duration: 900, easing: 'easeOutQuart' }
        }
      });
    }

    // tiny helper to produce semi-transparent background
    function tinyAlpha(hex, alpha) {
      // convert #rrggbb to rgba
      const c = hex.replace('#','');
      const r = parseInt(c.substring(0,2),16);
      const g = parseInt(c.substring(2,4),16);
      const b = parseInt(c.substring(4,6),16);
      return `rgba(${r},${g},${b},${alpha})`;
    }

    // ========== Fake/example data (you can replace with real data) ==========
    // Pie charts
    const typesLabels = ['Harassment','Scam','Phishing','Stalking'];
    const typesData = [42, 28, 18, 12];
    const typesColors = [COLORS.mint, COLORS.pink, COLORS.yellow, COLORS.purple];

    const ageLabels = ['Teens (13-17)','Young adults (18-24)','Adults (25+)'];
    const ageData = [38, 47, 15];
    const ageColors = [COLORS.pink, COLORS.mint, COLORS.yellow];

    const platformLabels = ['Instagram','WhatsApp','TikTok'];
    const platformData = [54, 30, 16];
    const platformColors = [COLORS.mint, COLORS.purple, COLORS.pink];

    // Bar snapshot labels (current numbers)
    const snapshotLabels = ['Users', 'Downloads', 'Outreach events', 'Site visits'];
    const snapshotValues = [22000, 4800, 320, 125000];
    // Map to colors (re-using theme)
    const snapshotColors = [COLORS.mint, COLORS.pink, COLORS.yellow, COLORS.purple];

    // Before/After line chart (monthly series example)
    const months = ['Jan','Feb','Mar','Apr','May','Jun'];
    // Example metric: average confidence score (0-100)
    const beforeSeries = [42, 45, 44, 43, 46, 45];
    const afterSeries  = [55, 60, 64, 68, 72, 78];

    // ===== Render charts on DOM ready =====
    document.addEventListener('DOMContentLoaded', function(){
      // Pie: Types
      const ctxTypes = document.getElementById('chartTypes').getContext('2d');
      createPie(ctxTypes, typesLabels, typesData, typesColors);
      renderLegend('legend-types', typesLabels, typesColors);

      // Pie: Ages
      const ctxAges = document.getElementById('chartAges').getContext('2d');
      createPie(ctxAges, ageLabels, ageData, ageColors);
      renderLegend('legend-ages', ageLabels, ageColors);

      // Pie: Platforms
      const ctxPlatforms = document.getElementById('chartPlatforms').getContext('2d');
      createPie(ctxPlatforms, platformLabels, platformData, platformColors);
      renderLegend('legend-platforms', platformLabels, platformColors);

      // Bar: Snapshot
      const ctxSnapshot = document.getElementById('chartSnapshot').getContext('2d');
      createBar(ctxSnapshot, snapshotLabels, snapshotValues, snapshotColors);
      // custom legend for snapshot (show label + color)
      renderLegend('legend-snapshot', snapshotLabels, snapshotColors);

      // Line: Before vs After
      const ctxBeforeAfter = document.getElementById('chartBeforeAfter').getContext('2d');
      createBeforeAfterLine(ctxBeforeAfter, months, beforeSeries, afterSeries, COLORS.pink, COLORS.mint);
      // legend for this chart can be built-in, but add a small textual legend too
      const laf = document.getElementById('legend-beforeafter');
      if (laf) {
        laf.innerHTML = '';
        const s1 = document.createElement('span');
        s1.innerHTML = '<i class="dot" style="background:' + COLORS.pink + ';"></i> Before';
        const s2 = document.createElement('span');
        s2.innerHTML = '<i class="dot" style="background:' + COLORS.mint + ';"></i> After';
        laf.appendChild(s1);
        laf.appendChild(s2);
      }
    });
  </script>
</body>
</html>
